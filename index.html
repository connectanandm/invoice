<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invoice Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 20px;
    }

    #invoice {
      background: #fff;
      padding: 20px;
      width: 794px; /* A4 width */
      margin: auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      box-sizing: border-box;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .centered {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .centered label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      text-align: center;
    }

    .centered input {
      padding: 6px;
      width: 200px;
      box-sizing: border-box;
      border-radius: 4px;
      border: 1px solid #ccc;
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }

    th {
      background: #f0f0f0;
    }

    .btns {
      text-align: center;
      margin-bottom: 20px;
    }

    .btns button {
      margin: 5px;
      padding: 6px 12px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      display: inline-block;
    }

    .btns button:hover {
      background: #0056b3;
    }

    #totalAmount {
      text-align: center;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div id="invoice">
  <h1 style="text-align:center"><b>Anand Web Solutions</b></h1><br>
  <h2>Customer Details</h2>
  <div class="centered">
    <div>
      <label for="clientName">Name</label>
      <input type="text" id="clientName" placeholder="Enter name">
    </div>
    <div>
      <label for="clientContact">Phone / Email</label>
      <input type="text" id="clientContact" placeholder="Enter contact">
    </div>
    <div>
      <label for="invoiceDate">Invoice Date</label>
      <input type="date" id="invoiceDate">
    </div>
  </div>

  <h3 style="text-align:center;">Invoice Items</h3>
  <table id="itemsTable">
    <thead>
      <tr>
        <th>Description</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody id="itemsBody">
      <tr>
        <td><input type="text" placeholder="Item" /></td>
        <td><input type="number" min="1" value="1" onchange="calculateTotals()" /></td>
        <td><input type="number" min="0" value="0" onchange="calculateTotals()" /></td>
        <td class="rowTotal">‚Çπ0.00</td>
      </tr>
    </tbody>
  </table>

  <div class="btns">
    <button onclick="addItem()">+ Add Item</button>
    <button onclick="calculateTotals()">‚úî DONE</button>
    <button onclick="generatePDF()">PRINT INVOICE</button>
    <button onclick="resetForm()">üîÅ Reset</button>
  </div>

  <div id="totalAmount">Grand Total: ‚Çπ0.00</div>
</div>

<script>
  document.getElementById('invoiceDate').valueAsDate = new Date();

  function addItem() {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td><input type="text" placeholder="Item" /></td>
      <td><input type="number" min="1" value="1" onchange="calculateTotals()" /></td>
      <td><input type="number" min="0" value="0" onchange="calculateTotals()" /></td>
      <td class="rowTotal">‚Çπ0.00</td>
    `;
    document.getElementById('itemsBody').appendChild(row);
  }

  function calculateTotals() {
    let grandTotal = 0;
    const rows = document.querySelectorAll('#itemsBody tr');

    rows.forEach(row => {
      const qty = parseFloat(row.children[1].children[0].value) || 0;
      const price = parseFloat(row.children[2].children[0].value) || 0;
      const total = qty * price;
      row.children[3].textContent = `‚Çπ${total.toLocaleString('en-IN', { minimumFractionDigits: 2 })}`;
      grandTotal += total;
    });

    document.getElementById('totalAmount').textContent = `Grand Total: ‚Çπ${grandTotal.toLocaleString('en-IN', { minimumFractionDigits: 2 })}`;
  }

  function generatePDF() {
    const btns = document.querySelector('.btns');
    btns.style.display = 'none';

    const opt = {
      margin:       0,
      filename:     'invoice.pdf',
      image:        { type: 'jpeg', quality: 0.98 },
      html2canvas:  { scale: 2 },
      jsPDF:        { unit: 'pt', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(opt).from(document.getElementById('invoice')).save().then(() => {
      btns.style.display = 'block';
    });
  }

  function resetForm() {
    document.getElementById('clientName').value = '';
    document.getElementById('clientContact').value = '';
    document.getElementById('invoiceDate').valueAsDate = new Date();
    document.getElementById('itemsBody').innerHTML = `
      <tr>
        <td><input type="text" placeholder="Item" /></td>
        <td><input type="number" min="1" value="1" onchange="calculateTotals()" /></td>
        <td><input type="number" min="0" value="0" onchange="calculateTotals()" /></td>
        <td class="rowTotal">‚Çπ0.00</td>
      </tr>
    `;
    calculateTotals();
  }

  calculateTotals();
</script>
</body>
</html>
